(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{229:function(e,t,n){},235:function(e,t){},237:function(e,t){},250:function(e,t){},252:function(e,t){},280:function(e,t){},281:function(e,t){},286:function(e,t){},288:function(e,t){},295:function(e,t){},314:function(e,t){},347:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),o=n(78),r=n.n(o),s=n(3),i=(n(229),n(214)),l=n(10),b=n(395),d=n(82),j=n(371),h=n(372),u=n(373),x=n(374),O=n(368),g=n(396),m=n(369),f=n(376),p=n(377),v=n(378),w=n(375);var y=function(e,t,n){var a=Object(c.useState)(""),o=Object(s.a)(a,2),r=o[0],i=o[1],l=Object(c.useState)(""),b=Object(s.a)(l,2),d=b[0],j=b[1],h=Object(c.useState)(!0),u=Object(s.a)(h,2),x=u[0],O=u[1];return Object(c.useEffect)((function(){var c=!1;return"GET"!==t||c||fetch("https://s5po6.sse.codesandbox.io/".concat(e)).then((function(e){return O(!1),e.json()})).then((function(e){i(e),j(null)})).catch((function(e){j(e.message),O(!1)})),"POST"===t&&n&&!c&&fetch("https://s5po6.sse.codesandbox.io".concat(e),{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){O(!1),i(e)})).catch((function(e){j(e),O(!1)})),function(){c=!0}}),[e,n&&n]),{fetchData:r,fetchIsPending:x,fetchError:d}},S=n(370),C=n(1);var T=function(){var e=Object(c.useState)(),t=Object(s.a)(e,2),n=t[0],a=t[1],o=Object(c.useState)(!0),r=Object(s.a)(o,2),i=r[0],l=r[1],T=Object(c.useState)(!1),_=Object(s.a)(T,2),D=_[0],k=_[1],P=y("/login","POST",n),E=P.fetchData,I=P.fetchIsPending;return P.fetchError,Object(c.useEffect)((function(){E&&l(!0)}),[E]),!I&&localStorage.setItem("token",E.token),E.token&&(window.location.href="/"),Object(C.jsx)(O.a,{bg:"brand.bg",h:"94vh",color:"brand.text",children:Object(C.jsx)("form",{onSubmit:function(e){e.preventDefault();var t={email:e.target[0].value,password:e.target[1].value};a(t),l(!1)},children:Object(C.jsxs)(g.a,{gap:"10",px:"10",py:"32",boxShadow:"2xl",w:{md:"2xl",base:"max"},flexDir:"column",children:[Object(C.jsxs)(m.a,{textAlign:"center",color:"brand.main",children:["Login ",Object(C.jsx)(S.a,{})]}),Object(C.jsxs)(d.a,{id:"email",isRequired:!0,children:[Object(C.jsx)(j.a,{children:"Email"}),Object(C.jsx)(h.a,{name:"email",borderColor:"brand.subText",type:"email",_placeholder:{color:"brand.text"},placeholder:"Enter Email",autoComplete:"false"})]}),Object(C.jsxs)(d.a,{id:"passoword",isRequired:!0,children:[Object(C.jsx)(j.a,{children:"Password"}),Object(C.jsxs)(u.a,{size:"md",children:[Object(C.jsx)(h.a,{pr:"4.5rem",type:D?"text":"password",placeholder:"Enter password",_placeholder:{color:"brand.text"},borderColor:"brand.subText"}),Object(C.jsx)(x.a,{width:"4.5rem",children:Object(C.jsx)(b.a,{h:"1.75rem",size:"sm",onClick:function(){k(!D)},color:"brand.text",bg:"transparent",_hover:"none",_active:"none",children:D?"Hide":"Show"})})]})]}),Object(C.jsxs)(f.a,{children:[Object(C.jsx)(b.a,{type:"submit",bg:"brand.main",borderColor:"brand.subText",w:"full",_hover:"none",isDisabled:!i,color:"brand.bgText",children:i?"Submit":Object(C.jsx)(w.a,{thickness:"4px",speed:"0.65s",emptyColor:"gray.200",color:"brand.main",size:"md"})}),Object(C.jsx)(p.a,{color:"brand.main",onClick:function(e){e.preventDefault();a({email:"test@test.com",password:"test123456"}),l(!1)},textDecor:"underline",children:"Login as Test User"}),Object(C.jsx)(v.a,{color:"red",children:E.msg}),Object(C.jsx)(v.a,{color:"green",children:E.success})]})]})})})};var _=function(){var e=Object(c.useState)(),t=Object(s.a)(e,2),n=t[0],a=t[1],o=Object(c.useState)(),r=Object(s.a)(o,2),i=r[0],l=r[1],p=Object(c.useState)(!1),T=Object(s.a)(p,2),_=T[0],D=T[1],k=Object(c.useState)(!0),P=Object(s.a)(k,2),E=P[0],I=(P[1],function(){D(!_)}),A=y("/register","POST",i),z=A.fetchData,R=(A.fetchIsPending,A.fetchError);return z.ok&&(window.location.href="/"),z.sucess&&(window.location.href="/login"),Object(C.jsx)(O.a,{bg:"brand.bg",color:"brand.text",maxH:"90vh",children:Object(C.jsx)("form",{onSubmit:function(e){if(e.preventDefault(),e.target[2].value!==e.target[4].value)return a("Passwords must match");var t={name:e.target[0].value,email:e.target[1].value,password:e.target[2].value,createdAt:new Date};l(t)},children:Object(C.jsxs)(g.a,{gap:{lg:"7",base:"10"},px:{lg:"10",base:"5"},mt:"32",py:"10",boxShadow:"2xl",w:{md:"2xl",base:"sm"},flexDir:"column",children:[Object(C.jsxs)(m.a,{textAlign:"center",color:"brand.main",children:["Register ",Object(C.jsx)(S.a,{})]}),Object(C.jsxs)(d.a,{id:"email",isRequired:!0,children:[Object(C.jsx)(j.a,{children:"Name"}),Object(C.jsx)(h.a,{w:{base:"100%",lg:"full"},name:"name",borderColor:"brand.subText",type:"text",_placeholder:{color:"brand.text"},placeholder:"Enter Name",autoComplete:"false"})]}),Object(C.jsxs)(d.a,{id:"email",isRequired:!0,children:[Object(C.jsx)(j.a,{children:"Email"}),Object(C.jsx)(h.a,{w:{base:"100%",lg:"full"},name:"email",borderColor:"brand.subText",type:"email",_placeholder:{color:"brand.text"},placeholder:"Enter Email",autoComplete:"false"})]}),Object(C.jsxs)(d.a,{id:"passoword",isRequired:!0,children:[Object(C.jsx)(j.a,{children:"Password"}),Object(C.jsxs)(u.a,{size:"md",children:[Object(C.jsx)(h.a,{w:{base:"100%",lg:"full"},pr:"4.5rem",minLength:10,type:_?"text":"password",placeholder:"Enter password",_placeholder:{color:"brand.text"},borderColor:"brand.subText"}),Object(C.jsx)(x.a,{width:"4.5rem",children:Object(C.jsx)(b.a,{w:{base:"100%",lg:"full"},h:"1.75rem",size:"sm",onClick:I,color:"brand.text",bg:"transparent",_hover:"none",_active:"none",children:_?"Hide":"Show"})})]})]}),Object(C.jsxs)(d.a,{id:"passoword",isRequired:!0,children:[Object(C.jsx)(j.a,{children:"Confirm Password"}),Object(C.jsxs)(u.a,{size:"md",children:[Object(C.jsx)(h.a,{w:{base:"100%",lg:"full"},pr:"4.5rem",type:_?"text":"password",placeholder:"Enter password",_placeholder:{color:"brand.text"},borderColor:"brand.subText"}),Object(C.jsx)(x.a,{width:"4.5rem",children:Object(C.jsx)(b.a,{h:"1.75rem",w:{base:"100%",lg:"full"},size:"sm",onClick:I,color:"brand.text",bg:"transparent",_hover:"none",_active:"none",children:_?"Hide":"Show"})})]})]}),Object(C.jsxs)(f.a,{w:{base:"100%",lg:"full"},children:[Object(C.jsx)(b.a,{type:"submit",bg:"brand.main",borderColor:"brand.subText",w:"full",_hover:"none",color:"brand.bgText",children:E?"Submit":Object(C.jsx)(w.a,{thickness:"4px",speed:"0.65s",emptyColor:"gray.200",color:"brand.main",size:"md"})}),Object(C.jsx)(v.a,{color:"red",opacity:z.msg?"1":"0",transition:"ease",transitionDuration:"0.4s",children:z.msg}),Object(C.jsx)(v.a,{color:"green",children:z.success}),Object(C.jsx)(v.a,{color:"crimson",children:R.msg}),Object(C.jsx)(v.a,{color:"crimson",children:n})]})]})})})},D=Object(c.createContext)(),k=Object(c.createContext)(),P=n(42),E=n.n(P);var I=function(){var e=Object(c.useState)(),t=Object(s.a)(e,2),n=t[0],a=t[1];return Object(c.useEffect)((function(){var e=localStorage.getItem("token");if(e){var t=E.a.decode(e);a(t||null)}}),[]),{userLoggedIn:n}},A=n(381),z=n(390),R=n(379),L=n(380),B=n(382);var q=function(e){var t=e.data,n=e.user,a=Object(c.useState)(),o=Object(s.a)(a,2),r=o[0],i=o[1],u=Object(c.useState)(),x=Object(s.a)(u,2),O=x[0],p=x[1],w=Object(c.useState)(),S=Object(s.a)(w,2),T=S[0],_=S[1],D=Object(c.useState)(!0),k=Object(s.a)(D,2),P=k[0],E=k[1],I=Object(c.useState)(),z=Object(s.a)(I,2),q=(z[0],z[1],Object(l.f)()),U=Object(c.useState)(!1),W=Object(s.a)(U,2),N=W[0],F=W[1],H=y(r,"POST",O),G=H.fetchData;return H.fetchIsPending,H.fetchError,Object(c.useEffect)((function(){G&&(window.location.href="/"),G&&E(!0),G&&F(null)}),[G]),Object(C.jsx)(f.a,{w:"96",px:{lg:"0",base:"2"},m:{base:"auto",lg:"0"},py:{lg:"0",base:"2"},children:Object(C.jsx)("form",{onSubmit:function(e){if(e.preventDefault(),N){var c={title:e.target[0].value,body:e.target[1].value,author:t.name,authorID:n.id,isPublished:!0,image:null!==T&&void 0!==T?T:"",authorImage:t.image};i("/"),p(c),E(!1)}else{var a={title:e.target[0].value,body:e.target[1].value,author:t.name,authorID:n.id,isPublished:!1,image:null!==T&&void 0!==T?T:"",authorImage:t.image};i("/"),p(a),E(!1)}},children:Object(C.jsxs)(d.a,{children:[Object(C.jsx)(m.a,{color:"brand.main",children:"Create Blog"}),Object(C.jsxs)(g.a,{py:"5",pb:"2",w:"full",children:[Object(C.jsx)(j.a,{children:"Title"}),Object(C.jsx)(R.a,{type:"text",placeholder:"Title for your blog",_placeholder:{color:"brand.text"},borderColor:"brand.subText",required:!0}),Object(C.jsxs)(f.a,{py:"2",children:[Object(C.jsx)(j.a,{children:"Body"}),Object(C.jsx)(R.a,{required:!0,borderColor:"brand.subText",placeholder:"Describe your Blog",_placeholder:{color:"brand.text"},type:"text"})]}),Object(C.jsx)(j.a,{children:"Image"}),Object(C.jsx)(h.a,{type:"file",border:"none",p:"0px",m:"0px",onChange:function(){var e=document.querySelector("#img"),t=document.querySelector("input[type=file]").files[0],n=new FileReader;n.onloadend=function(){e.src=n.result,_(n.result)},t?n.readAsDataURL(t):e.src=""}}),Object(C.jsx)(L.a,{w:{lg:"full",base:"96"},objectFit:"cover",src:"",alt:"",id:"img"})]}),Object(C.jsxs)(A.a,{justify:"space-between",children:[Object(C.jsx)(b.a,{type:"submit",bg:"brand.main",borderColor:"brand.subText",onClick:function(){F(!0)},w:"68%",isDisabled:!P,_hover:"none",color:"brand.bgText",children:P||!N?"Publish":Object(C.jsx)(B.a,{isIndeterminate:!0,color:"brand.main",size:"30px",thickness:"12"})}),Object(C.jsx)(b.a,{type:"submit",bg:"twitter.600",borderColor:"brand.subText",onClick:function(){F(!1),q.goBack()},w:"30%",isDisabled:!P,_hover:"none",color:"brand.bgText",children:P||N?"Save":Object(C.jsx)(B.a,{display:!N,isIndeterminate:!0,color:"twitter.600",size:"30px",thickness:"12"})})]}),G.success&&Object(C.jsx)(v.a,{children:G.success})]})})})},U=n(64),W=n(385),N=n(393),F=n(387),H=n(388),G=n(389),J=n.p+"static/media/question-mark-img.1287f47e.JPEG",M=n(4),V=n(383),Y=n(384);var K=function(e){var t,n=e.user,a=e.blogID,o=e.comments,r=Object(c.useState)(!1),i=Object(s.a)(r,2),l=i[0],d=i[1],j=Object(c.useState)(),u=Object(s.a)(j,2),x=u[0],g=u[1],p=Object(c.useState)(),w=Object(s.a)(p,2),S=w[0],T=w[1],_=Object(c.useState)(!1),D=Object(s.a)(_,2),k=D[0],P=D[1],E=Object(c.useState)([]),I=Object(s.a)(E,2),z=I[0],R=I[1],L=Object(c.useState)(),q=Object(s.a)(L,2),N=q[0],F=q[1];Object(c.useEffect)((function(){fetch("https://s5po6.sse.codesandbox.io/user/".concat(n.id)).then((function(e){return e.json()})).then((function(e){F(e),console.log(o)})).catch((function(e){}))}),[]),Object(c.useEffect)((function(){fetch("https://s5po6.sse.codesandbox.io/blog/comments/".concat(a)).then((function(e){return e.json()})).then((function(e){P(!1),e.comments.length&&R(e.comments),document.querySelector("#form")[0].value=null})).catch((function(e){}))}),[l,k]);var H=y(x,"POST",S);return H.fetchData,H.fetchError,H.fetchIsPending,Object(C.jsxs)(f.a,{transition:"ease",transitionDuration:"0.3s",display:N?"block":"none",children:[Object(C.jsx)(O.a,{py:"3",boxShadow:"lg",dropShadow:"2xl",children:Object(C.jsxs)(b.a,{onClick:function(){d(!l)},rounded:"2xl",bg:"brand.bg",color:"brand.text",_hover:{bg:"whiteAlpha.300"},children:["Comments",l?Object(C.jsx)(Y.a,{mx:"1"}):Object(C.jsx)(V.a,{mx:"1"})]})}),Object(C.jsxs)(f.a,{display:l?"content":"none",children:[Object(C.jsx)(f.a,{overflowY:"auto",maxH:"250px",transition:"ease",opacity:"0.9",transitionDuration:"0.3s",children:z&&o||o.length?z.map((function(e){return Object(C.jsxs)(A.a,{px:"5",py:"3",children:[Object(C.jsx)(W.a,{src:e.image,mr:"4",_hover:{cursor:"pointer"},onClick:function(){window.location.href="/profile/".concat(e.user)}}),Object(C.jsxs)(A.a,{flexDir:"column",children:[Object(C.jsxs)(m.a,{fontSize:"md",children:[e.name," ",Object(C.jsxs)("span",{children:["\u2022",Object(C.jsx)(v.a,{fontWeight:"normal",fontSize:"sm",color:"brand.subText",display:"inline-block",px:"1",children:Object(U.a)(e.createdAt,{addSuffix:!0})})]})," "]}),Object(C.jsx)(v.a,{mt:"1",color:"brand.text",opacity:"0.7",w:"full",overflowWrap:"anywhere",children:e.comment})]})]},e.createdAt)})):Object(C.jsxs)(O.a,{my:"5",children:[Object(C.jsx)(v.a,{fontWeight:"bold",children:"Hold on!"}),Object(C.jsx)(v.a,{mx:"2",children:"Getting comments..."}),Object(C.jsx)(B.a,{size:"6",isIndeterminate:!0,color:"brand.main"})]})}),l&&Object(C.jsx)("form",{onSubmit:function(e){e.preventDefault(),P(!0),g("/blog/comment/"+a+"?_method=PUT"),T({comment:document.querySelector("#form")[0].value,createdAt:Date.now(),user:n.id,image:N.image,name:N.name}),console.log(document.querySelector("#form")[0].value)},id:"form",children:Object(C.jsxs)(O.a,{px:"3",py:"3",borderTop:"1px",borderTopRadius:"10",borderColor:"blackAlpha.200",children:[Object(C.jsx)(W.a,{src:N.image}),Object(C.jsx)(h.a,(t={mx:"4",borderColor:"brand.subText",placeholder:"Comment something...",border:"1px"},Object(M.a)(t,"borderColor","brand.subText"),Object(M.a)(t,"_placeholder",{color:"brand.subText"}),t)),Object(C.jsx)(b.a,{bg:"brand.main",_hover:"none",_active:"none",isDisabled:k,color:"white",w:"32",type:"submit",children:k?Object(C.jsx)(O.a,{children:Object(C.jsx)(B.a,{size:"6",isIndeterminate:!0,color:"brand.main"})}):Object(C.jsx)(v.a,{children:"Submit"})})]})})]})]})};var Q=function(e){var t=e.blog,n=e.user,a=e.profile,o=Object(c.useState)(!0),r=Object(s.a)(o,2),i=r[0],l=r[1],d=Object(c.useState)(!1),j=Object(s.a)(d,2),h=j[0],u=j[1],x=Object(c.useState)(!1),O=Object(s.a)(x,2),p=(O[0],O[1]),w=Object(c.useState)(!0),S=Object(s.a)(w,2),T=(S[0],S[1]);Object(c.useEffect)((function(){n&&t.authorID===n.id&&(u(!0),t.isPublished||p(!0))}));var _=Object(c.useState)(),D=Object(s.a)(_,2),k=D[0],P=D[1],E=Object(c.useState)(),I=Object(s.a)(E,2),z=I[0],R=I[1],B=Object(c.useState)(!1),q=Object(s.a)(B,2),M=q[0],V=q[1],Y=Object(c.useState)(3),Q=Object(s.a)(Y,2),X=Q[0],Z=Q[1],$=y(k,"POST",z);return $.fetchData,$.fetchIsPending,$.fetchError,Object(C.jsx)(f.a,{children:Object(C.jsxs)(A.a,{display:M?"none":"flex",w:{lg:"20",base:"full"},py:"6",transition:"ease",borderRadius:"10",transitionDuration:"0.3s",children:[Object(C.jsx)(A.a,{flexDir:"column",px:{lg:"5",base:"1"},pt:"10",children:Object(C.jsx)(f.a,{display:{base:"none",lg:"contents"},_hover:{opacity:"0.8",cursor:"pointer"},onMouseOver:function(){},children:!a&&Object(C.jsx)(W.a,{size:"md",onClick:function(){return window.location.href="/profile/"+t.authorID},src:t.authorImage})})}),Object(C.jsxs)(f.a,{children:[Object(C.jsxs)(v.a,{color:"brand.subText",py:"2",w:"max",transition:"ease",transitionDuration:"0.3s",_hover:{color:"brand.text",cursor:"pointer"},children:["Published"," ",Object(U.a)(new Date(t.updatedAt),{addSuffix:!0})]}),Object(C.jsxs)(A.a,{flexDir:"column",boxShadow:"lg",borderRadius:"10",m:"auto",w:{lg:"full",base:"370px"},children:[Object(C.jsxs)(f.a,{pos:"relative",children:[Object(C.jsx)(L.a,{transition:"ease",transitionDuration:"0.3s",_hover:{opacity:"0.8",cursor:"pointer"},src:t.image?t.image:J,h:i?"200px":"500px",onClickCapture:function(){l(!i)},objectFit:"cover",minW:{lg:"90vh",base:"full"},borderTopRadius:"10"}),Object(C.jsxs)(N.a,{autoSelect:!1,children:[Object(C.jsx)(N.b,{pos:"absolute",top:"5px",right:"5px",_hover:{outline:"none"},_active:{outline:"1px solid black",outlineColor:"brand.bg"},as:b.a,px:"4",borderRadius:"10",bg:"whiteAlpha.500",color:"blackAlpha.800",children:"\u2022\u2022\u2022"}),Object(C.jsxs)(N.d,{bg:"brand.bg",color:"brand.text",border:"2px solid black",borderColor:"#a3a3a3",children:[Object(C.jsxs)(N.c,{onClick:function(){return window.location.href="/profile/"+t.authorID},_hover:{bgColor:"brand.main",color:"white"},_active:"none",bg:"transparent",color:"brand.text",children:[Object(C.jsx)(F.a,{mr:"2"})," Profile"]}),h?Object(C.jsxs)(N.c,{onClick:function(){window.confirm("Unpublishing will delete all comments from your blogs. Do you want to continue?")&&(T(!1),fetch("https://s5po6.sse.codesandbox.io/blog/publish/".concat(t._id,"?_method=PUT"),{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify({isPublished:!1})}).then((function(e){return window.location.href="/profile/"+t.authorID,e.json()})).catch((function(e){})))},_hover:{bgColor:"brand.main",color:"white"},_active:"none",bg:"transparent",color:"brand.text",children:[Object(C.jsx)(H.a,{mr:"2"})," Un-Publish"]}):"",h?Object(C.jsxs)(N.c,{onClick:function(){P("/blog/"+t._id+"?_method=DELETE"),R({blogID:t._id}),V(!0)},_hover:{bgColor:"brand.main",color:"white"},_active:"none",bg:"transparent",color:"brand.text",children:[Object(C.jsx)(G.a,{mr:"2"})," Delete"]}):""]})]})]}),Object(C.jsxs)(g.a,{flexDir:"column",gap:"6",p:"5",children:[Object(C.jsx)(m.a,{color:"brand.main",w:"100%",overflowWrap:"break-word",transition:"ease",transitionDuration:"0.3s",_hover:{cursor:"pointer",opacity:"0.9"},children:t.title}),n?Object(C.jsxs)(v.a,{fontWeight:"bold",fontSize:"lg",opacity:"0.7",children:[" ",t.author]}):Object(C.jsx)(v.a,{fontWeight:"bold",fontSize:"lg",opacity:"0.7",children:"Anonymous"}),Object(C.jsx)(v.a,{noOfLines:X,transitionDuration:"0.3s",transition:"ease",textOverflow:"ellipsis",children:t.body}),Object(C.jsx)(A.a,{justify:"flex-start",children:Object(C.jsx)(b.a,{variant:"link",onClick:function(){Z(3==X?null:3)},children:X?"Read more":"Read Less"})})]}),n&&Object(C.jsx)(K,{user:n,blogID:t._id,comments:t.comments})]})]})]},t._id)})};var X=function(){var e=Object(c.useState)(),t=Object(s.a)(e,2),n=(t[0],t[1],Object(c.useState)()),a=Object(s.a)(n,2),o=a[0],r=a[1],i=Object(c.useState)(!1),l=Object(s.a)(i,2),b=l[0],d=l[1];return Object(c.useEffect)((function(){fetch("https://s5po6.sse.codesandbox.io/blogs").then((function(e){return e.json()})).then((function(e){r(e)})).catch((function(e){}))}),[]),Object(c.useEffect)((function(){var e=localStorage.getItem("token");if(e){var t=E.a.decode(e);t&&d(t)}}),[]),Object(C.jsx)(f.a,{w:{lg:"65%",base:"100%"},children:o?o.blogs.map((function(e){return e.isPublished&&Object(C.jsx)(Q,{blog:e,user:b})})):Object(C.jsxs)(O.a,{pt:{base:"32",lg:"44"},w:"90%",m:"auto",children:[Object(C.jsx)(m.a,{fontSize:{base:"2xl",lg:"2.3em"},opacity:"0.7",pr:{base:"3",lg:"7"},children:"Getting Blogs"}),Object(C.jsx)(B.a,{isIndeterminate:!0,size:{base:"40px",lg:"60px"},color:"brand.main"})]})})};var Z=function(){var e=Object(c.useState)(),t=Object(s.a)(e,2),n=t[0],a=t[1],o=Object(c.useState)(),r=Object(s.a)(o,2),i=r[0],l=r[1];Object(c.useEffect)((function(){var e=localStorage.getItem("token");if(e){var t=E.a.decode(e);t&&(a("user/".concat(t.id)),l(t))}}),[]);var d=y(n,"GET"),j=d.fetchData,h=d.fetchIsPending;return d.fetchError,console.log(!h&&j),Object(C.jsxs)(f.a,{bg:"brand.bg",minH:"100vh",color:"brand.text",children:[Object(C.jsx)(m.a,{textAlign:"center",pt:"20",color:"brand.main",textDecor:"underline",children:"Overland Blogs"}),Object(C.jsxs)(A.a,{flexDir:{base:"column-reverse",lg:"row"},justify:"space-between",px:{lg:"10",base:"1"},w:{lg:"container.xl",base:""},m:"auto",py:{lg:"16",base:"10"},children:[Object(C.jsx)(X,{}),i?Object(C.jsx)(q,{data:j,user:i}):Object(C.jsxs)(f.a,{textAlign:"left",w:{lg:"96",base:"full"},px:{base:"5",lg:"0"},children:[Object(C.jsx)(m.a,{color:"brand.main",children:"Welcome to Overland Blogs"}),Object(C.jsx)(v.a,{color:"brand.subText",py:"2",children:"Please Login To Create Blog! Also, Enjoy dark mode :)"}),Object(C.jsx)(p.a,{href:"/login",children:Object(C.jsx)(b.a,{w:"full",mt:"6",_hover:"none",_active:"none",h:"12",bg:"brand.main",color:"brand.bgText",children:"Login"})}),Object(C.jsxs)(A.a,{alignItems:"center",my:"3",children:[Object(C.jsx)(z.a,{})," ",Object(C.jsx)(v.a,{px:"5",color:"brand.subText",children:"OR"})," ",Object(C.jsx)(z.a,{})]}),Object(C.jsx)(p.a,{href:"/register",children:Object(C.jsx)(b.a,{w:"full",_hover:"none",_active:"none",h:"12",color:"white",bg:"twitter.700",children:"Register"})})]})]})]})};var $=function(){var e=Object(l.f)();return Object(C.jsxs)("div",{children:[" ",Object(C.jsxs)(f.a,{children:[Object(C.jsx)(b.a,{onClick:function(){e.push("/login")},variant:"ghost",color:"brand.bgText",_hover:"none",_active:"none",children:"Login"}),Object(C.jsx)(b.a,{onClick:function(){e.push("/register")},variant:"ghost",color:"brand.bgText",_hover:"none",_active:"none",children:"Signup"})]})]})},ee=n(398),te=n(397),ne=n.p+"static/media/logout.c99a6b9d.svg",ce=n.p+"static/media/profile.a296afc6.svg";var ae=function(e){var t=e.fetchData,n=e.fetchIsPending,a=e.handleTheme,o=I().userLoggedIn;console.log(t);var r=Object(c.useState)(!1),i=Object(s.a)(r,2);return i[0],i[1],Object(C.jsx)(O.a,{children:Object(C.jsxs)(N.a,{children:[Object(C.jsx)(N.b,{children:Object(C.jsx)(A.a,{p:"1",borderRadius:"20",alignItems:"center",_hover:{borderColor:"red"},children:Object(C.jsx)(W.a,{size:"sm",src:!n&&t.image})})}),Object(C.jsx)(te.a,{children:Object(C.jsxs)(N.d,{bg:"brand.bg",color:"brand.subText",children:[Object(C.jsx)(L.a,{size:"sm",w:"full",h:"24",objectFit:"cover",src:!n&&t.image})," ",Object(C.jsxs)(v.a,{color:"brand.bgText",fontWeight:"bold",fontSize:"1.2em",p:"3",bg:"brand.main",children:["Welcome back, ",!n&&t.name]}),Object(C.jsxs)(N.c,{onClick:function(){return window.location.href="/profile/"+o.id},_hover:{bgColor:"brand.main",color:"white"},_active:"none",py:"2",bg:"transparent",color:"brand.text",children:[Object(C.jsx)(L.a,{src:ce,mr:"2"}),"Profile"]}),Object(C.jsx)(N.c,{onClick:function(){localStorage.removeItem("token"),window.location.href="/"},_hover:{bgColor:"brand.main",color:"white"},_active:"none",py:"2",bg:"transparent",color:"brand.text",children:Object(C.jsxs)(O.a,{children:[Object(C.jsx)(L.a,{src:ne,mr:"2"}),"Logout"]})}),Object(C.jsx)(N.c,{_hover:{bgColor:"brand.main",color:"white"},_active:"none",py:"2",bg:"transparent",color:"brand.text",children:Object(C.jsxs)(O.a,{justifyContent:"space-between",children:[Object(C.jsx)(v.a,{children:"Dark Mode"}),Object(C.jsx)(ee.a,{ml:"28",value:"dark",id:"email-alerts",colorScheme:"gray",size:"md",onChange:a})]})})]})})]})})};var oe=function(){var e=Object(l.f)(),t=Object(c.useState)(null),n=Object(s.a)(t,2),a=n[0],o=n[1],r=Object(c.useContext)(k),i=r.currentTheme,b=r.setCurrentTheme,d=I().userLoggedIn;Object(c.useEffect)((function(){localStorage.removeItem("theme"),localStorage.setItem("theme",i)}),[i]),Object(c.useEffect)((function(){d&&o("user/"+d.id)}),[d]);var j=y(a,"GET"),h=j.fetchData,u=j.fetchIsPending;return j.fetchError,Object(C.jsxs)(A.a,{pos:"fixed",w:"100%",zIndex:"999",justify:"space-between",h:"7vh",alignItems:"center",px:"4",bgColor:"brand.main",children:[Object(C.jsx)(f.a,{children:Object(C.jsx)(m.a,{size:"lg",color:"brand.bgText",children:Object(C.jsx)(p.a,{onClick:function(){e.push("/")},_hover:"none",children:"Overland Blogs"})})}),d?Object(C.jsx)(O.a,{children:Object(C.jsx)(ae,{fetchData:h,fetchIsPending:u,handleTheme:function(){b(!i)}})}):Object(C.jsx)(O.a,{children:Object(C.jsx)($,{})})]})},re=n(394),se=n(392),ie=n(391);var le=function(e){var t=e.blogs;console.log("Unpublished"),console.log(t);var n=Object(l.f)(),a=Object(c.useState)(!1),o=Object(s.a)(a,2),r=(o[0],o[1]),i=Object(c.useState)(!1),d=Object(s.a)(i,2),j=(d[0],d[1]);return Object(C.jsx)(f.a,{children:t&&t.length&&Object(C.jsxs)(f.a,{py:"10",bg:"brand.bg",color:"brand.text",px:"10",children:[Object(C.jsx)(m.a,{py:"5",textAlign:"center",textDecor:"underline",opacity:"0.7",children:"Un-Published Blogs"}),Object(C.jsx)("span",{children:Object(C.jsx)(v.a,{textAlign:"center",opacity:"0.7",fontSize:"sm",textDecor:"none",children:"(Refresh to see changes)"})}),Object(C.jsx)(A.a,{overflow:"auto",py:"10",children:t&&t.map((function(e){return Object(C.jsxs)(f.a,{mx:"5",children:[Object(C.jsx)(v.a,{opacity:"0.7",children:"Un-Published"}),Object(C.jsxs)(f.a,{w:"370px",minW:"370px",bg:"brand.bg",boxShadow:"2xl",borderRadius:"12",color:"brand.text",children:[Object(C.jsxs)(f.a,{pos:"relative",children:[Object(C.jsx)(L.a,{borderRadius:"10",h:"270px",shadow:"xl",objectFit:"cover",w:"full",src:e.image?e.image:J}),Object(C.jsxs)(N.a,{autoSelect:!1,children:[Object(C.jsx)(N.b,{pos:"absolute",top:"10px",right:"5px",_hover:{outline:"none"},_active:{outline:"1px solid black",outlineColor:"brand.bg"},as:b.a,px:"4",borderRadius:"10",bg:"whiteAlpha.500",color:"blackAlpha.800",children:"\u2022\u2022\u2022"}),Object(C.jsxs)(N.d,{bg:"brand.bg",color:"brand.text",border:"2px solid black",borderColor:"#a3a3a3",children:[Object(C.jsxs)(N.c,{_hover:{bgColor:"brand.main",color:"white"},_active:"none",bg:"transparent",onClick:function(t){return function(e){r(!0),fetch("https://s5po6.sse.codesandbox.io/blog/publish/".concat(e,"?_method=PUT"),{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify({isPublished:!0,createdAt:Date.now()})}).then((function(e){return e.json()})).then((function(e){alert("Blog Published!"),n.push("/")})).catch((function(e){alert(e)}))}(e._id)},color:"brand.text",children:[Object(C.jsx)(F.a,{mr:"2"})," Publish"]}),Object(C.jsxs)(N.c,{_hover:{bgColor:"brand.main",color:"white"},_active:"none",bg:"transparent",onClick:function(){return t=e,void(window.location.href="/edit/".concat(t._id));var t},color:"brand.text",children:[Object(C.jsx)(H.a,{mr:"2"})," Edit"]}),Object(C.jsxs)(N.c,{_hover:{bgColor:"brand.main",color:"white"},_active:"none",bg:"transparent",onClick:function(t){return function(e){fetch("https://s5po6.sse.codesandbox.io/blog/".concat(e,"?_method=DELETE"),{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(){window.location.reload()})).catch((function(e){alert("Some error occured, blog was not deleted.")})),j(!0)}(e._id)},color:"brand.text",children:[Object(C.jsx)(G.a,{mr:"2"})," Delete"]})]})]})]}),Object(C.jsxs)(f.a,{p:"5",children:[Object(C.jsx)(m.a,{pb:"2",opacity:"0.7",children:e.title}),Object(C.jsx)(v.a,{noOfLines:1,children:e.body})]})]})]})}))})]})})};var be=function(e){var t=Object(c.useState)(null),n=Object(s.a)(t,2),a=(n[0],n[1],Object(c.useState)()),o=Object(s.a)(a,2),r=o[0],i=o[1],l=Object(c.useState)(),b=Object(s.a)(l,2),d=b[0],j=b[1],h=Object(c.useState)(),u=Object(s.a)(h,2),x=u[0],p=u[1];Object(c.useEffect)((function(){var e=localStorage.getItem("token");if(e){var t=E.a.decode(e);p(t&&void 0==!t?t:{})}}),[]),Object(c.useEffect)((function(){i(!1),fetch("https://s5po6.sse.codesandbox.io/profile/"+e.match.params.id).then((function(e){return e.json()})).then((function(e){if(console.log(e),j(null!==e?e:null),e.blogs.length){i(!1);var t=e.blogs.filter((function(e){return!1===e.isPublished}));T(t)}else i(!0)}))}),[]);var w=Object(c.useState)(),y=Object(s.a)(w,2),S=y[0],T=y[1];return Object(C.jsxs)(f.a,{minH:"100vh",children:[Object(C.jsxs)(O.a,{pt:"12",px:{lg:"96"},justifyContent:"space-evenly",background:"brand.gray",boxShadow:"lg",h:"72",children:[Object(C.jsxs)(f.a,{children:[Object(C.jsx)(m.a,{color:"brand.text",fontFamily:"fantasy",opacity:"0.8",textDecor:"underline",children:d&&d.user.name}),d&&Object(C.jsxs)(v.a,{overflowWrap:"anywhere",w:{base:"52",lg:"48"},color:"brand.text",opacity:"0.5",children:["Overlander for"," ",d.user.createdAt?Object(U.a)(new Date(d.user.createdAt)):"No Info :("]}),Object(C.jsxs)(v.a,{pt:"5",fontWeight:"bold",color:"brand.text",opacity:"0.5",children:["Blogs Published:"," ",S&&d&&d.blogs.length-S.length||"None"," "]}),void 0!==x&&S&&x.id!==e.match.params.id&&Object(C.jsxs)(v.a,{fontWeight:"bold",color:"brand.text",opacity:"0.5",children:["Un-Published: ",S&&S.length||"None"]})]}),Object(C.jsx)(W.a,Object(M.a)({src:d&&d.user.image,size:{lg:"20vh",base:"14vh"}},"size","2xl"))]}),void 0!==x&&S&&x.id!==e.match.params.id&&Object(C.jsx)(f.a,{children:Object(C.jsx)(le,{blogs:S})}),d?Object(C.jsxs)(f.a,{children:[d.blogs.length&&Object(C.jsx)(m.a,{textAlign:"center",py:"10",textDecor:"underline",bg:"brand.bg",color:"brand.text",children:Object(C.jsx)(v.a,{opacity:"0.7",children:"Published Blogs"})}),Object(C.jsx)(g.a,{bg:"brand.bg",color:"brand.text",templateColumns:{lg:"repeat(2, 1fr)",base:"1"},children:d&&d.blogs.map((function(e){return e.isPublished&&Object(C.jsx)(Q,{blog:e,user:x,profile:!0,comments:e.comments})}))})]}):Object(C.jsxs)(f.a,{children:[Object(C.jsx)(ie.a,{isIndeterminate:!0,size:"xs",colorScheme:"green",rounded:"sm"}),Object(C.jsx)(m.a,{textAlign:"center",opacity:"0.7",pt:"48",children:"Getting blogs..."})]}),r&&Object(C.jsx)(f.a,{children:Object(C.jsx)(m.a,{textAlign:"center",opacity:"0.7",pt:"10",children:"No Blogs to show"})})]})};var de=function(e){var t=Object(l.f)(),n=e.match.params.id,a=Object(c.useState)(),o=Object(s.a)(a,2),r=o[0],i=o[1],u=Object(c.useState)(!1),x=Object(s.a)(u,2),g=x[0],p=x[1];Object(c.useEffect)((function(){fetch("https://s5po6.sse.codesandbox.io/blog/edit/".concat(n)).then((function(e){return e.json()})).then((function(e){console.log(e),i(e)})).catch((function(e){}))}),[n]);var w=Object(c.useState)(),y=Object(s.a)(w,2),S=y[0],T=y[1];return Object(C.jsx)(f.a,{bg:"brand.bg",color:"brand.text",minH:"100vh",children:Object(C.jsxs)(f.a,{pt:"20",w:"70vh",m:"auto",children:[Object(C.jsx)(m.a,{textAlign:"center",children:"Edit"}),Object(C.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault();var c={title:e.target[0].value,body:e.target[1].value,image:null!==S&&void 0!==S?S:r.blog.image};p(!0),fetch("https://s5po6.sse.codesandbox.io/blog/edit/".concat(n,"?_method=PUT"),{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}).then((function(e){return e.json()})).then((function(e){p(!1),t.goBack()})).catch((function(e){}))}(e)},children:[Object(C.jsxs)(O.a,{flexDir:"column",children:[Object(C.jsxs)(d.a,{id:"title",isRequired:!0,pt:"5",children:[Object(C.jsx)(j.a,{children:"Title"}),Object(C.jsx)(h.a,{name:"title",borderColor:"brand.subText",type:"text",defaultValue:r&&r.blog.title,_placeholder:{color:"brand.text"},placeholder:"Enter Email"})]}),Object(C.jsxs)(d.a,{id:"body",isRequired:!0,py:"3",children:[Object(C.jsx)(j.a,{children:"Body"}),Object(C.jsx)(h.a,{name:"body",borderColor:"brand.subText",type:"text",defaultValue:r&&r.blog.body,_placeholder:{color:"brand.text"},placeholder:"Enter Title"})]}),Object(C.jsxs)(d.a,{id:"image",children:[Object(C.jsx)(j.a,{children:"Image"}),Object(C.jsx)(v.a,{py:"3",children:r&&r.blog.image?"Select Another?":"You have no image uploaded yet... Upload One"}),Object(C.jsx)("input",{type:"file",onChange:function(e){return function(e){e.preventDefault();var t=document.querySelector("#img"),n=e.target.files[0],c=new FileReader;c.onloadend=function(){t.src=c.result,T(c.result)},n?c.readAsDataURL(n):t.src=""}(e)}}),r&&r.blog.image?Object(C.jsx)(L.a,{w:"full",h:"300px",pt:"2",id:"img",objectFit:"contain",src:r&&r.blog.image}):Object(C.jsx)(L.a,{w:"full",pt:"2",h:"300px",id:"img",objectFit:"contain"})]})]}),Object(C.jsx)(b.a,{isDisabled:g,my:"1",color:"brand.bgText",w:"full",_hover:"none",bg:"brand.main",type:"submit",children:g?"Submiting...":"Submit"})]})]})})};var je=function(){var e=Object(c.useState)(!1),t=Object(s.a)(e,2),n=t[0],a=t[1],o=Object(se.a)(n?{colors:{brand:{bg:"#3b4252",main:"#18b888",bgText:"white",text:"white",subText:"#a3a3a3",gray:"#4c5363"}}}:{colors:{brand:{main:"#1C9B75",bgText:"white",text:"black",subText:"gray",bg:"white",gray:"#cccccc"}}});Object(c.useEffect)((function(){var e=localStorage.getItem("token");if(e){var t=E.a.decode(e);t&&j(t)}}),[]);var r=Object(c.useState)(!1),b=Object(s.a)(r,2),d=b[0],j=b[1];return Object(C.jsx)("div",{className:"App",children:Object(C.jsx)(i.a,{children:Object(C.jsx)(re.a,{theme:o,children:Object(C.jsx)(k.Provider,{value:{currentTheme:n,setCurrentTheme:a},children:Object(C.jsxs)(D.Provider,{value:{userLogin:d,setUserLogin:j},children:[Object(C.jsx)(oe,{}),Object(C.jsxs)(l.c,{children:[Object(C.jsx)(l.a,{exact:!0,path:"./",component:Z}),Object(C.jsx)(l.a,{exact:!0,path:"./login",component:T}),Object(C.jsx)(l.a,{exact:!0,path:"./register",component:_}),Object(C.jsx)(l.a,{exact:!0,path:"./profile/:id",component:be}),Object(C.jsx)(l.a,{exact:!0,path:"./edit/:id",component:de})]})]})})})})})};r.a.render(Object(C.jsx)(a.a.StrictMode,{children:Object(C.jsx)(je,{})}),document.getElementById("root"))}},[[347,1,2]]]);
//# sourceMappingURL=main.393f8e1c.chunk.js.map